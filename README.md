# JingOS - 64位操作系统

🎉 **一个完全成功的从零构建64位操作系统项目**

## 项目概述

JingOS是一个完全从零开始构建的64位操作系统，展示了现代操作系统的完整启动流程，从BIOS引导到64位长模式的完整实现。

## 🏆 重大成就

### ✅ 多阶段Bootloader架构
- **Stage1 (512字节)**: 基础初始化、磁盘I/O、Stage2加载
- **Stage2 (无限制)**: 完整功能实现、模式切换、系统初始化
- **突破传统限制**: 实现了无大小限制的bootloader功能

### ✅ 完整的模式切换链
- **16位实模式** → **32位保护模式** → **64位长模式**
- 每个阶段都有独立的显示和错误处理
- 完整的CPU功能检测和兼容性处理

### ✅ 现代64位架构支持
- 完整的页表设置（PML4 → PDPT → PD）
- 16MB内存映射
- PAE和长模式位启用
- 64位段寄存器和栈设置

### ✅ 多种内核支持
- **测试内核**: 验证基础跳转机制
- **简单内核**: 动态代码生成测试
- **C风格内核**: 完整的彩色界面系统

## 🚀 可用版本

### 1. 📱 原始测试版本
```bash
make run
```
- 显示红色"Jing"内核标识
- 验证64位模式切换
- 清屏和内核启动

### 2. 🔧 简单内核版本
```bash
make run-rust
```
- 显示黄色"KERN"测试
- 动态内核代码生成
- 内存跳转验证

### 3. 🎨 C风格内核版本
```bash
make run-c
```
- 完整的彩色C内核界面
- 多彩信息显示
- 专业的内核输出

## 🔧 技术特性

### 核心技术
- **BIOS磁盘读取** - 精确的扇区管理
- **CPU功能检测** - 自动检测长模式支持
- **A20地址线启用** - 突破1MB内存限制
- **GDT构建和加载** - 全局描述符表管理
- **三层显示系统** - 16位/32位/64位分层显示

### 显示系统
- **16位显示** - BIOS中断输出
- **32位显示** - VGA缓冲区直接写入
- **64位显示** - 高亮显示和内核标识
- **完美的层次分离** - 每个模式独立的显示管理

## 🛠️ 构建和运行

### 环境要求
- NASM (汇编器)
- Rust (内核开发)
- QEMU (虚拟机)
- Make (构建工具)

### 快速开始
```bash
# 查看所有可用版本
make versions

# 构建并运行原始版本
make run

# 构建并运行C风格内核
make run-c

# 清理构建文件
make clean
```

## 📁 项目结构

```
jing-os/
├── bootloader/          # Bootloader源代码
│   ├── src/stage1.s     # 第一阶段bootloader
│   ├── src/stage2_clean.s # 第二阶段bootloader
│   ├── src/rust_simple.s  # 简单内核版本
│   └── src/c_kernel.s   # C风格内核
├── kernel/              # Rust内核源代码
├── c_kernel/            # C内核源代码
├── Makefile            # 构建脚本
└── README.md           # 项目文档
```

## 🎯 开发里程碑

- [x] **Stage1 Bootloader** - 基础启动和Stage2加载
- [x] **Stage2 Bootloader** - 完整的64位模式切换
- [x] **内核跳转验证** - bootloader到内核的完整链条
- [x] **专业启动体验** - 清屏切换和内核标识
- [x] **多种内核支持** - 测试、简单、C风格内核
- [x] **完整的构建系统** - 多版本支持

## 🎉 项目成就

这个项目成功实现了：
- **功能完整** 的多阶段bootloader
- **技术先进** 的64位长模式支持
- **稳定可靠** 的系统启动机制
- **架构优雅** 的模块化设计
- **多样化** 的内核支持

## 📄 许可证

MIT License

## 👨‍💻 作者

JingOS 开发团队

---

**这是一个完全成功的从零构建操作系统的项目！** 🎊

**所有版本都支持完整的64位长模式启动！**
